<h1>公開スレッド一覧</h1>

<div class="sort">
  <%= form_with url: topics_path, method: :get do %>
    <%= select_tag('sort',options_for_select([["投稿新着順", "0"], ["投稿数順", "1"], ["ブックマーク数順", "2"]])) %>
    <%= submit_tag('表示順を変更') %>
  <% end %>
</div>

<div class="sort for development">
  <%= link_to "投稿新着順にする", topics_path(sort: 0) %>
  <%= link_to "投稿数順にする", topics_path(sort: 1) %>
  <%= link_to "ブックマーク数順にする", topics_path(sort: 2) %>
</div>

<div class="new">
  <%= link_to new_topic_path do %>
    <%= "スレッド作成" %>
  <% end %>
</div>

<div class="list">
  <table class="table-striped">
    <% @topics.each do |topic| %>
      <tr>
        <td><%= attachment_image_tag topic.end_user, :image, fallback: "no-user-image-icon.jpg", size: "60x60" %></td>
        <td><%= link_to topic.title, topic_path(topic.id) %></td>
        <td>(<%= topic.posts.count %>)</td>
        <td>
          <div class="book-mark-<%= topic.id %>">
            <%= render 'books/book', topic: topic %>
          </div>
        </td>
      </tr>
    <% end %>
  </table>
</div>