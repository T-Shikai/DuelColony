<div class="container">
  <div class="row">
    <!--通知-->
    <% if @notice %>
      <div class="toast offset-md-9" data-autohide="false">
        <div class="toast-header">
          <strong class="mr-auto">チャットメッセージがあります</strong>
          <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="toast-body">
          <div>
            <%= @notice.visitor.name %> : <%= @notice.message.content %>
          </div>
          <div class="text-right">
            <%= link_to '対戦チャットへ', chat_room_path(@notice.room) %>
          </div>
        </div>
      </div>
    <% end %>
    <div class="offset-md-2 col-md-7">
      <h1>
        <%= attachment_image_tag(@user, :image, fallback: "no-user-image-icon.jpg", size: "100x100" ) %>
        <%= @user.name %> のマイページ
        <% if @user == current_end_user %>
          <%= link_to '編集', edit_end_user_path(@user), class: "btn btn-outline-light mb-2" %>
        <% end %>
      </h1>
      <div class="introduction bg-white rounded">
        <%= simple_format(@user.introduction) %>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="mypage-tab offset-md-2 col-md-7">
      <div class="my-tab-nav">
        <a href="" class="my-nav-item is-active" data-nav="0"></a>
        <a href="" class="my-nav-item" data-nav="1"></a>
        <a href="" class="my-nav-item" data-nav="2"></a>
      </div>
      <div class="my-tab-contents">
        <div class="room-history my-content">
          <h2>対戦履歴</h2>
          <%= render 'rooms/room-list', rooms: @rooms %>
        </div>
        <div class="my-topics my-content">
          <h2>作成したスレッド</h2>
          <div class="row row-cols-1 row-cols-md-2">
            <% @topics.each do |topic| %>
              <%= render 'topics/list', topic: topic %>
            <% end %>
          </div>
          <%= paginate @topics %>
        </div>
        <div class="book-topics my-content">
          <h2>ブックマークしたスレッド</h2>
          <div class="row row-cols-1 row-cols-md-2">
            <% @books.each do |book| %>
              <% topic = book.topic %>
              <%= render 'topics/list', topic: topic %>
            <% end %>
          </div>
          <%= paginate @books %>
        </div>
        <div class="tournament my-content">
          <h2>開催する・した大会</h2>
          <div class="row row-cols-1 row-cols-md-2">
            <% @tournaments.each do |tour| %>
              <%= render 'tournaments/list', tour: tour %>
            <% end %>
          </div>
          <%= paginate @tournaments %>
        </div>
        <div class="tournament my-content">
          <h2>参加する・した大会</h2>
          <div class="row row-cols-1 row-cols-md-2">
            <% @participants.each do |part| %>
              <% tour = Tournament.find_by(id: part.tournament_id) %>
              <%= render 'tournaments/list', tour: tour %>
            <% end %>
          </div>
          <%= paginate @participants %>
        </div>
      </div>
    </div>
  </div>
</div>


